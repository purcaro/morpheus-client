// functions used by the algorithm to interact
// with dbsim.
// TODO: Add google caja or adsafe support

// this is is the worker thread



var algoNeigh = null;
var algoId = null;

var initializeState = function (message) {
    algoNeigh = message["neighbours"];
    algoId = message["id"];
};

onmessage = function(event) {
    // get the JSON object
    var message = JSON.parse(event.data);

    switch(message["cmd"]) {
        case "init":
            initializeState(message);
            runCodeBlock();
        default:
            // do nothing
    }

};

var getId = function() {
    return algoId;
};

var getNeighbours = function () {
    var neighbours = [];

    var i = 0;
    algoNeigh.forEach(function(){
        neighbours[i] = algoNeigh[i]["nodeId"];
        i++;
    });

    return neighbours;
};

var messagesToReceive = function () {
    return true;
};

var send = function (msg, node) {
    return false;

};

var recieve = function () {
    return true;
};

var message = function (msg) {
    this.data = msg;
};

var log = function(msg) {
    console.log(msg);
};

var runCodeBlock = function() {




